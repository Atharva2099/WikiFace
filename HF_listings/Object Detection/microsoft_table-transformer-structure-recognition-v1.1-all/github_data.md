# GitHub Data for microsoft_table-transformer-structure-recognition-v1.1-all

**Task Category:** Object Detection

## Repository 1: microsoft/table-transformer

# GitHub Repository Data

**Repository:** [microsoft/table-transformer](https://github.com/microsoft/table-transformer)

## Basic Information

- **Description:** Table Transformer (TATR) is a deep learning model for extracting tables from unstructured documents (PDFs and images). This is also the official repository for the PubTables-1M dataset and GriTS evaluation metric.
- **Created:** 2021-05-17T19:01:34+00:00
- **Last Updated:** 2025-06-20T15:56:37+00:00
- **Last Pushed:** 2024-06-24T13:41:20+00:00
- **Default Branch:** main
- **Size:** 333 KB

## Statistics

- **Stars:** 2,641
- **Forks:** 289
- **Watchers:** 2,641
- **Open Issues:** 104
- **Total Issues:** 0
- **Pull Requests:** 39

## License

- **Type:** MIT License
- **SPDX ID:** MIT
- **URL:** [License](https://github.com/microsoft/table-transformer/blob/main/LICENSE)

## Languages

- **Python:** 683,823 bytes
- **Dockerfile:** 328 bytes

## Topics

- `table-detection`
- `table-extraction`
- `table-structure-recognition`
- `table-functional-analysis`

## Top Contributors

1. **bsmock** - 161 contributions
2. **rohithpv** - 29 contributions
3. **microsoftopensource** - 5 contributions

## File Structure (Sample of 10 files)

Total files: 75

- `.github` (tree)
- `.github/workflows` (tree)
- `.github/workflows/codeql-analysis.yml` (blob)
- `.gitignore` (blob)
- `CODE_OF_CONDUCT.md` (blob)
- `LICENSE` (blob)
- `README.md` (blob)
- `SECURITY.md` (blob)
- `SUPPORT.md` (blob)
- `detr` (tree)

## Recent Issues

- 游릭 **#200** Table Extraction Header and Column Merge Issue (open)
- 游릭 **#199** Convert .pth to safetensors (open)
- 游릭 **#198** Bugfix filepathes in process_scitsr.py (open)
- 游댮 **#197** Question about fine-tuning model with my own dataset ? (closed)
- 游릭 **#196** Urgent Assistance Needed (open)

## Recent Pull Requests

- 游릭 **#198** Bugfix filepathes in process_scitsr.py (open)
- 游릭 **#195** Correction to IOU calcuation (open)
- 游릭 **#193** Bugfix area given boxes in Pascal format (open)
- 游릭 **#188** Fix: visualization of cells structure in inference.py (open)
- 游릭 **#184** Bugfix when extracting tokens for multiple detected objects (open)

## Recent Commits

- **16d124f6** Update README.md - Brandon Smock (2023-09-07T04:38:34+00:00)
- **e693b910** Added 3 pre-trained models - Brandon Smock (2023-08-22T23:56:50+00:00)
- **42867c86** Update README.md - Brandon Smock (2023-06-15T18:11:02+00:00)
- **02a2a4ed** Update README.md - Brandon Smock (2023-05-25T16:36:27+00:00)
- **235ad51d** Update README.md - Brandon Smock (2023-03-11T00:12:10+00:00)
- **85d182e4** Merge pull request #95 from bsmock/main - Brandon Smock (2023-03-10T22:32:38+00:00)
- **f99122e0** Merge pull request #6 from bsmock/transforms - Brandon Smock (2023-03-10T03:28:20+00:00)
- **0d83017d** Updated README - Brandon Smock (2023-03-10T03:25:25+00:00)
- **ecedc43d** Adding more (tighter) cropping during training - Brandon Smock (2023-03-10T03:16:32+00:00)
- **182db93c** Updating resize transform at inference - Brandon Smock (2023-03-10T02:43:16+00:00)

## External Links Found in README

- https://huggingface.co/bsmock/TATR-v1.1-Fin/resolve/main/TATR-v1.1-Fin-msft.pth">Weights</a></td>
- https://huggingface.co/bsmock/TATR-v1.1-All">Model
- https://huggingface.co/datasets/bsmock/pubtables-1m
- https://arxiv.org/pdf/2110.00061.pdf
- https://openaccess.thecvf.com/content/CVPR2022/html/Smock_PubTables-1M_Towards_Comprehensive_Table_Extraction_From_Unstructured_Documents_CVPR_2022_paper.html
- https://huggingface.co/bsmock/TATR-v1.1-Pub/resolve/main/TATR-v1.1-Pub-msft.pth">Weights</a></td>
- https://opensource.microsoft.com/codeofconduct/faq/
- https://huggingface.co/bsmock/TATR-v1.1-Pub">Model
- https://huggingface.co/bsmock/tatr-pubtables1m-v1.0/resolve/main/pubtables1m_detection_detr_r18.pth">Weights</a></td>
- https://github.com/microsoft/table-transformer},
- https://docs.microsoft.com/en-us/azure/storage/common/storage-use-azcopy-v10
- https://huggingface.co/bsmock/TATR-v1.1-All/resolve/main/TATR-v1.1-All-msft.pth">Weights</a></td>
- https://huggingface.co/bsmock/TATR-v1.1-Fin">Model
- https://arxiv.org/abs/2303.00716
- https://cvpr2022.thecvf.com/
- https://huggingface.co/bsmock/tatr-pubtables1m-v1.0/resolve/main/pubtables1m_structure_detr_r18.pth">Weights</a></td>
- https://arxiv.org/abs/2203.12555
- https://user-images.githubusercontent.com/10793386/139559159-cd23c972-8731-48ed-91df-f3f27e9f4d79.jpg
- https://msropendataset01.blob.core.windows.net/pubtables1m?[SAS_TOKEN_HERE]"
- https://msropendataset01.blob.core.windows.net/pubtables1m?[SAS_TOKEN_HERE]`.

## Raw Data

<details>
<summary>Click to expand raw JSON data</summary>

```json
{
  "id": 368293480,
  "name": "table-transformer",
  "full_name": "microsoft/table-transformer",
  "description": "Table Transformer (TATR) is a deep learning model for extracting tables from unstructured documents (PDFs and images). This is also the official repository for the PubTables-1M dataset and GriTS evaluation metric.",
  "html_url": "https://github.com/microsoft/table-transformer",
  "clone_url": "https://github.com/microsoft/table-transformer.git",
  "ssh_url": "git@github.com:microsoft/table-transformer.git",
  "homepage": "",
  "topics": [
    "table-detection",
    "table-extraction",
    "table-structure-recognition",
    "table-functional-analysis"
  ],
  "default_branch": "main",
  "created_at": "2021-05-17T19:01:34+00:00",
  "updated_at": "2025-06-20T15:56:37+00:00",
  "pushed_at": "2024-06-24T13:41:20+00:00",
  "size_kb": 333,
  "watchers_count": 2641,
  "stargazers_count": 2641,
  "forks_count": 289,
  "open_issues_count": 104,
  "license": {
    "key": "mit",
    "name": "MIT License",
    "spdx_id": "MIT",
    "url": "https://github.com/microsoft/table-transformer/blob/main/LICENSE"
  },
  "languages": {
    "Python": 683823,
    "Dockerfile": 328
  },
  "top_contributors": [
    {
      "login": "bsmock",
      "contributions": 161
    },
    {
      "login": "rohithpv",
      "contributions": 29
    },
    {
      "login": "microsoftopensource",
      "contributions": 5
    }
  ],
  "file_tree_count": 75,
  "file_tree_sample": [
    {
      "path": ".github",
      "type": "tree"
    },
    {
      "path": ".github/workflows",
      "type": "tree"
    },
    {
      "path": ".github/workflows/codeql-analysis.yml",
      "type": "blob"
    },
    {
      "path": ".gitignore",
      "type": "blob"
    },
    {
      "path": "CODE_OF_CONDUCT.md",
      "type": "blob"
    },
    {
      "path": "LICENSE",
      "type": "blob"
    },
    {
      "path": "README.md",
      "type": "blob"
    },
    {
      "path": "SECURITY.md",
      "type": "blob"
    },
    {
      "path": "SUPPORT.md",
      "type": "blob"
    },
    {
      "path": "detr",
      "type": "tree"
    }
  ],
  "issues_count": 0,
  "pulls_count": 39,
  "recent_issues": [
    {
      "number": 200,
      "title": "Table Extraction Header and Column Merge Issue",
      "state": "open"
    },
    {
      "number": 199,
      "title": "Convert .pth to safetensors",
      "state": "open"
    },
    {
      "number": 198,
      "title": "Bugfix filepathes in process_scitsr.py",
      "state": "open"
    },
    {
      "number": 197,
      "title": "Question about fine-tuning model with my own dataset ?",
      "state": "closed"
    },
    {
      "number": 196,
      "title": "Urgent Assistance Needed",
      "state": "open"
    }
  ],
  "recent_pulls": [
    {
      "number": 198,
      "title": "Bugfix filepathes in process_scitsr.py",
      "state": "open"
    },
    {
      "number": 195,
      "title": "Correction to IOU calcuation",
      "state": "open"
    },
    {
      "number": 193,
      "title": "Bugfix area given boxes in Pascal format",
      "state": "open"
    },
    {
      "number": 188,
      "title": "Fix: visualization of cells structure in inference.py",
      "state": "open"
    },
    {
      "number": 184,
      "title": "Bugfix when extracting tokens for multiple detected objects",
      "state": "open"
    }
  ],
  "recent_commits": [
    {
      "sha": "16d124f616109746b7785f03085100f1f6247575",
      "author": "Brandon Smock",
      "date": "2023-09-07T04:38:34+00:00",
      "message": "Update README.md"
    },
    {
      "sha": "e693b9104873a87f3a649ea48d80fc1db52144a9",
      "author": "Brandon Smock",
      "date": "2023-08-22T23:56:50+00:00",
      "message": "Added 3 pre-trained models"
    },
    {
      "sha": "42867c86768388ca4cafd546178abfb15c63aed3",
      "author": "Brandon Smock",
      "date": "2023-06-15T18:11:02+00:00",
      "message": "Update README.md"
    },
    {
      "sha": "02a2a4eded9ccf70be356fad405bc9555b4ad551",
      "author": "Brandon Smock",
      "date": "2023-05-25T16:36:27+00:00",
      "message": "Update README.md"
    },
    {
      "sha": "235ad51dbef25d4165e6e1adff23453cc2ee490a",
      "author": "Brandon Smock",
      "date": "2023-03-11T00:12:10+00:00",
      "message": "Update README.md"
    },
    {
      "sha": "85d182e44910a9c92297f75be533cb3ed9569877",
      "author": "Brandon Smock",
      "date": "2023-03-10T22:32:38+00:00",
      "message": "Merge pull request #95 from bsmock/main"
    },
    {
      "sha": "f99122e0e6c2cbd5b9e94d605394146e55486857",
      "author": "Brandon Smock",
      "date": "2023-03-10T03:28:20+00:00",
      "message": "Merge pull request #6 from bsmock/transforms"
    },
    {
      "sha": "0d83017d60f81179a85f00db1b028c574b2b66e8",
      "author": "Brandon Smock",
      "date": "2023-03-10T03:25:25+00:00",
      "message": "Updated README"
    },
    {
      "sha": "ecedc43def29810df96a309a8313ed13faff95fe",
      "author": "Brandon Smock",
      "date": "2023-03-10T03:16:32+00:00",
      "message": "Adding more (tighter) cropping during training"
    },
    {
      "sha": "182db93ca21e7abe82714669cf8068cbc1a0c5f8",
      "author": "Brandon Smock",
      "date": "2023-03-10T02:43:16+00:00",
      "message": "Updating resize transform at inference"
    },
    {
      "sha": "c292ea46b1c87a9800451fe1c53e0a091bc01fec",
      "author": "Brandon Smock",
      "date": "2023-03-10T02:21:16+00:00",
      "message": "Merge pull request #5 from bsmock/bug_fixes"
    },
    {
      "sha": "98936a29a19a587938a17e10ff5eca59b7172db5",
      "author": "Brandon Smock",
      "date": "2023-03-10T02:18:41+00:00",
      "message": "Updating environment name, removing other temporary environment file"
    },
    {
      "sha": "0bb3ab71c4ec2a8b6c656c67af40eeaf863f306e",
      "author": "Brandon Smock",
      "date": "2023-03-10T02:17:35+00:00",
      "message": "Updating Pubmed processing script"
    },
    {
      "sha": "c87d9b91045364eb5543ee70b575c87bd071dbd3",
      "author": "Brandon Smock",
      "date": "2023-03-09T22:34:43+00:00",
      "message": "Making the amount of image padding a command line argument"
    },
    {
      "sha": "4175b84189ae9d2ebd9aafbad2f60748c8881c7c",
      "author": "Brandon Smock",
      "date": "2023-03-09T22:30:53+00:00",
      "message": "Adding args for the amount of padding included around tables in train and test images"
    },
    {
      "sha": "caad7de04da9804dc5de6bd74e1985687851d456",
      "author": "Brandon Smock",
      "date": "2023-03-09T22:20:03+00:00",
      "message": "Inference documentation improvements"
    },
    {
      "sha": "0d5c64bbc961fc0506914f5779e167a5600abf39",
      "author": "Brandon Smock",
      "date": "2023-03-09T20:58:36+00:00",
      "message": "Updating inference documentation"
    },
    {
      "sha": "de773395b062732f5a421e63771691bdcfaf05c3",
      "author": "Brandon Smock",
      "date": "2023-03-09T20:55:43+00:00",
      "message": "Bug fixes and adding control over crop padding"
    },
    {
      "sha": "ef21069f2a42254bbd049609f7d4bebc25abcf09",
      "author": "Brandon Smock",
      "date": "2023-03-09T20:55:12+00:00",
      "message": "Updating with upgrated packages"
    },
    {
      "sha": "43a7a6697792e8b8913d4c7b5443cd312b2699b6",
      "author": "Brandon Smock",
      "date": "2023-03-09T20:53:34+00:00",
      "message": "Updating inference documentation"
    }
  ],
  "readme_text": "# Table Transformer (TATR)\n\nA deep learning model based on object detection for extracting tables from PDFs and images.\n\nFirst proposed in [\"PubTables-1M: Towards comprehensive table extraction from unstructured documents\"](https://openaccess.thecvf.com/content/CVPR2022/html/Smock_PubTables-1M_Towards_Comprehensive_Table_Extraction_From_Unstructured_Documents_CVPR_2022_paper.html).\n\n![table_extraction_v2](https://user-images.githubusercontent.com/10793386/139559159-cd23c972-8731-48ed-91df-f3f27e9f4d79.jpg)\n\nThis repository also contains the official code for these papers:\n- [\"GriTS: Grid table similarity metric for table structure recognition\"](https://arxiv.org/abs/2203.12555)\n- [\"Aligning benchmark datasets for table structure recognition\"](https://arxiv.org/abs/2303.00716)\n\nNote: If you are looking to use Table Transformer to extract your own tables, here are some helpful things to know:\n- TATR can be trained to work well across many document domains and everything needed to train your own model is included here. But at the moment pre-trained model weights are only available for TATR trained on the PubTables-1M dataset. (See the additional documentation for how to train your own multi-domain model.)\n- TATR is an object detection model that recognizes tables from image input. The inference code built on TATR needs text extraction (from OCR or directly from PDF) as a separate input in order to include text in its HTML or CSV output.\n\nAdditional information about this project for both users and researchers, including data, training, evaluation, and inference code is provided below.\n\n## News\n`08/22/2023`: We have released 3 new pre-trained models for TATR-v1.1 (trained on 1. PubTables-1M, 2. FinTabNet.c, and 3. both datasets combined) according to the details in [our paper](https://arxiv.org/abs/2303.00716).\\\n`04/19/2023`: Our latest papers ([link](https://arxiv.org/abs/2203.12555) and [link](https://arxiv.org/abs/2303.00716)) have been accepted at [ICDAR 2023](https://icdar2023.org/).\\\n`03/09/2023`: We have added more image cropping to the official training script (like we do in our most recent paper) and updated the code and environment.yml to use Python 3.10.9, PyTorch 1.13.1, and Torchvision 0.14.1, among others.\\\n`03/07/2023`: We have released a new simple [inference pipeline](src/inference.py) for TATR. Now you can easily detect and recognize tables from images and convert them to HTML or CSV.\\\n`03/07/2023`: We have released a [collection of scripts](scripts/) to create training data for TATR and to canonicalize pre-existing datasets, such as FinTabNet and SciTSR.\\\n`03/01/2023`: New paper \"Aligning benchmark datasets for table structure recognition\" is now available on [arXiv](https://arxiv.org/abs/2303.00716).\\\n`11/25/2022`: We have made the full PubTables-1M dataset alternatively available for download from [Hugging Face](https://huggingface.co/datasets/bsmock/pubtables-1m).\\\n`05/05/2022`: We have released the pre-trained weights for the table structure recognition model trained on PubTables-1M.\\\n`03/23/2022`: Our paper \"GriTS: Grid table similarity metric for table structure recognition\" is now available on [arXiv](https://arxiv.org/abs/2203.12555)\\\n`03/04/2022`: We have released the pre-trained weights for the table detection model trained on PubTables-1M.\\\n`03/03/2022`: \"PubTables-1M: Towards comprehensive table extraction from unstructured documents\" has been accepted at [CVPR 2022](https://cvpr2022.thecvf.com/).\\\n`11/21/2021`: Our updated paper \"PubTables-1M: Towards comprehensive table extraction from unstructured documents\" is available on [arXiv](https://arxiv.org/pdf/2110.00061.pdf).\\\n`10/21/2021`: The full PubTables-1M dataset has been officially released on [Microsoft Research Open Data](https://msropendata.com/datasets/505fcbe3-1383-42b1-913a-f651b8b712d3).\\\n`06/08/2021`: Initial version of the Table Transformer (TATR) project is released.\n\n# PubTables-1M\n\nThe goal of PubTables-1M is to create a large, detailed, high-quality dataset for training and evaluating a wide variety of models for the tasks of **table detection**, **table structure recognition**, and **functional analysis**.\n\nIt contains:\n- 575,305 annotated document pages containing tables for table detection.\n- 947,642 fully annotated tables including text content and complete location (bounding box) information for table structure recognition and functional analysis.\n- Full bounding boxes in both image and PDF coordinates for all table rows, columns, and cells (including blank cells), as well as other annotated structures such as column headers and projected row headers.\n- Rendered images of all tables and pages.\n- Bounding boxes and text for all words appearing in each table and page image.\n- Additional cell properties not used in the current model training.\n\nAdditionally, cells in the headers are *canonicalized* and we implement multiple *quality control* steps to ensure the annotations are as free of noise as possible. For more details, please see [our paper](https://arxiv.org/pdf/2110.00061.pdf).\n\n## Pre-trained Model Weights\nWe provide different pre-trained models for table detection and table structure recognition.\n\n<b>Table Detection:</b>\n<table>\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>Model</th>\n      <th>Training Data</th>\n      <th>Model Card</th>\n      <th>File</th>\n      <th>Size</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr style=\"text-align: right;\">\n      <td>DETR R18</td>\n      <td>PubTables-1M</td>\n      <td><a href=\"https://huggingface.co/bsmock/tatr-pubtables1m-v1.0\">Model Card</a></td>\n      <td><a href=\"https://huggingface.co/bsmock/tatr-pubtables1m-v1.0/resolve/main/pubtables1m_detection_detr_r18.pth\">Weights</a></td>\n      <td>110 MB</td>\n    </tr>\n  </tbody>\n</table>\n\n<b>Table Structure Recognition:</b>\n<table>\n  <thead>\n    <tr style=\"text-align: left;\">\n      <th>Model</th>\n      <th>Training Data</th>\n      <th>Model Card</th>\n      <th>File</th>\n      <th>Size</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr style=\"text-align: left;\">\n      <td>TATR-v1.0</td>\n      <td>PubTables-1M</td>\n      <td><a href=\"https://huggingface.co/bsmock/tatr-pubtables1m-v1.0\">Model Card</a></td>\n      <td><a href=\"https://huggingface.co/bsmock/tatr-pubtables1m-v1.0/resolve/main/pubtables1m_structure_detr_r18.pth\">Weights</a></td>\n      <td>110 MB</td>\n    </tr>\n    <tr style=\"text-align: left;\">\n      <td>TATR-v1.1-Pub</td>\n      <td>PubTables-1M</td>\n      <td><a href=\"https://huggingface.co/bsmock/TATR-v1.1-Pub\">Model Card</a></td>\n      <td><a href=\"https://huggingface.co/bsmock/TATR-v1.1-Pub/resolve/main/TATR-v1.1-Pub-msft.pth\">Weights</a></td>\n      <td>110 MB</td>\n    </tr>\n    <tr style=\"text-align: left;\">\n      <td>TATR-v1.1-Fin</td>\n      <td>FinTabNet.c</td>\n      <td><a href=\"https://huggingface.co/bsmock/TATR-v1.1-Fin\">Model Card</a></td>\n      <td><a href=\"https://huggingface.co/bsmock/TATR-v1.1-Fin/resolve/main/TATR-v1.1-Fin-msft.pth\">Weights</a></td>\n      <td>110 MB</td>\n    </tr>\n    <tr style=\"text-align: left;\">\n      <td>TATR-v1.1-All</td>\n      <td>PubTables-1M + FinTabNet.c</td>\n      <td><a href=\"https://huggingface.co/bsmock/TATR-v1.1-All\">Model Card</a></td>\n      <td><a href=\"https://huggingface.co/bsmock/TATR-v1.1-All/resolve/main/TATR-v1.1-All-msft.pth\">Weights</a></td>\n      <td>110 MB</td>\n    </tr>\n  </tbody>\n</table>\n\n## Evaluation Metrics\n\n<b>Table Detection:</b>\n<table>\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>Model</th>\n      <th>Test Data</th>\n      <th>AP50</th>\n      <th>AP75</th>\n      <th>AP</th>\n      <th>AR</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr style=\"text-align: right;\">\n      <td>DETR R18</td>\n      <td>PubTables-1M</td>\n      <td>0.995</td>\n      <td>0.989</td>\n      <td>0.970</td>\n      <td>0.985</td>\n    </tr>\n  </tbody>\n</table>\n\n<b>Table Structure Recognition:</b>\n<table>\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>Model</th>\n      <th>Test Data</th>\n      <th>AP50</th>\n      <th>AP75</th>\n      <th>AP</th>\n      <th>AR</th>\n      <th>GriTS<sub>Top</sub></th>\n      <th>GriTS<sub>Con</sub></th>\n      <th>GriTS<sub>Loc</sub></th>\n      <th>Acc<sub>Con</sub></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr style=\"text-align: right;\">\n      <td>TATR-v1.0</td>\n      <td>PubTables-1M</td>\n      <td>0.970</td>\n      <td>0.941</td>\n      <td>0.902</td>\n      <td>0.935</td>\n      <td>0.9849</td>\n      <td>0.9850</td>\n      <td>0.9786</td>\n      <td>0.8243</td>\n    </tr>\n  </tbody>\n</table>\n\n## Training and Evaluation Data\n[PubTables-1M](https://msropendata.com/datasets/505fcbe3-1383-42b1-913a-f651b8b712d3) is available for download from [Microsoft Research Open Data](https://msropendata.com/).\n\nWe have also uploaded [the full set of archives](https://huggingface.co/datasets/bsmock/pubtables-1m) to Hugging Face.\n\nThe dataset on Microsoft Research Open Data comes in 5 tar.gz files:\n- PubTables-1M-Image_Page_Detection_PASCAL_VOC.tar.gz: Training and evaluation data for the detection model\n  - ```/images```: 575,305 JPG files; one file for each page image\n  - ```/train```: 460,589 XML files containing bounding boxes in PASCAL VOC format\n  - ```/test```: 57,125 XML files containing bounding boxes in PASCAL VOC format\n  - ```/val```: 57,591 XML files containing bounding boxes in PASCAL VOC format\n- PubTables-1M-Image_Page_Words_JSON.tar.gz: Bounding boxes and text content for all of the words in each page image\n  - One JSON file per page image (plus some extra unused files)\n- PubTables-1M-Image_Table_Structure_PASCAL_VOC.tar.gz: Training and evaluation data for the structure (and functional analysis) model\n  - ```/images```: 947,642 JPG files; one file for each page image\n  - ```/train```: 758,849 XML files containing bounding boxes in PASCAL VOC format\n  - ```/test```: 93,834 XML files containing bounding boxes in PASCAL VOC format\n  - ```/val```: 94,959 XML files containing bounding boxes in PASCAL VOC format\n- PubTables-1M-Image_Table_Words_JSON.tar.gz: Bounding boxes and text content for all of the words in each cropped table image\n  - One JSON file per cropped table image (plus some extra unused files)\n- PubTables-1M-PDF_Annotations_JSON.tar.gz: Detailed annotations for all of the tables appearing in the source PubMed PDFs. All annotations are in PDF coordinates.\n  - 401,733 JSON files; one file per source PDF\n\nTo download from the command line:\n1. Visit the [dataset home page](https://msropendata.com/datasets/505fcbe3-1383-42b1-913a-f651b8b712d3) with a web browser and click Download in the top left corner. This will create a link to download the dataset from Azure with a unique access token for you that looks like `https://msropendataset01.blob.core.windows.net/pubtables1m?[SAS_TOKEN_HERE]`.\n2. You can then use the command line tool [azcopy](https://docs.microsoft.com/en-us/azure/storage/common/storage-use-azcopy-v10) to download all of the files with the following command:\n```\nazcopy copy \"https://msropendataset01.blob.core.windows.net/pubtables1m?[SAS_TOKEN_HERE]\" \"/path/to/your/download/folder/\" --recursive\n```\n\nThen unzip each of the archives from the command line using:\n```\ntar -xzvf yourfile.tar.gz\n```\n\n## Code Installation\nCreate a conda environment from the yml file and activate it as follows\n```\nconda env create -f environment.yml\nconda activate tables-detr\n```\n\n## Model Training\nThe code trains models for 2 different sets of table extraction tasks:\n\n1. Table Detection\n2. Table Structure Recognition + Functional Analysis\n\nFor a detailed description of these tasks and the models, please refer to the paper.\n\nTo train, you need to ```cd``` to the ```src``` directory and specify: 1. the path to the dataset, 2. the task (detection or structure), and 3. the path to the config file, which contains the hyperparameters for the architecture and training.\n\nTo train the detection model:\n```\npython main.py --data_type detection --config_file detection_config.json --data_root_dir /path/to/detection_data\n```\n\nTo train the structure recognition model:\n```\npython main.py --data_type structure --config_file structure_config.json --data_root_dir /path/to/structure_data\n```\n\n##  Evaluation\nThe evaluation code computes standard object detection metrics (AP, AP50, etc.) for both the detection model and the structure model.\nWhen running evaluation for the structure model it also computes grid table similarity (GriTS) metrics for table structure recognition.\nGriTS is a measure of table cell correctness and is defined as the average correctness of each cell averaged over all tables.\nGriTS can measure the correctness of predicted cells based on:  1. cell topology alone, 2. cell topology and the reported bounding box location of each cell, or 3. cell topology and the reported text content of each cell.\nFor more details on GriTS, please see our papers.\n\nTo compute object detection metrics for the detection model:\n\n```\npython main.py --mode eval --data_type detection --config_file detection_config.json --data_root_dir /path/to/pascal_voc_detection_data --model_load_path /path/to/detection_model  \n```\n\nTo compute object detection and GriTS metrics for the structure recognition model:\n\n```\npython main.py --mode eval --data_type structure --config_file structure_config.json --data_root_dir /path/to/pascal_voc_structure_data --model_load_path /path/to/structure_model --table_words_dir /path/to/json_table_words_data\n```  \n\nOptionally you can add flags for things like controlling parallelization, saving detailed metrics, and saving visualizations:\\\n```--device cpu```: Change the default device from cuda to cpu.\\\n```--batch_size 4```: Control the batch size to use during the forward pass of the model.\\\n```--eval_pool_size 4```: Control the worker pool size for CPU parallelization during GriTS metric computation.\\\n```--eval_step 2```: Control the number of batches of processed input data to accumulate before passing all samples to the parallelized worker pool for GriTS metric computation.\\\n```--debug```: Create and save visualizations of the model inference. For each input image \"PMC1234567_table_0.jpg\", this will save two visualizations: \"PMC1234567_table_0_bboxes.jpg\" containing the bounding boxes output by the model, and \"PMC1234567_table_0_cells.jpg\" containing the final table cell bounding boxes after post-processing. By default these are saved to a new folder \"debug\" in the current directory.\\\n``` --debug_save_dir /path/to/folder```: Specify the folder to save visualizations to.\\\n```--test_max_size 500```: Run evaluation on a randomly sampled subset of the data. Useful for quick verifications and checks.\n\n## Fine-tuning and Other Model Training Scenarios\nIf model training is interrupted, it can be easily resumed by using the flag ```--model_load_path /path/to/model.pth``` and specifying the path to the saved dictionary file that contains the saved optimizer state.\n\nIf you want to restart training by fine-tuning a saved checkpoint, such as ```model_20.pth```, use the flag ```--model_load_path /path/to/model_20.pth``` and the flag ```--load_weights_only``` to indicate that the previous optimizer state is not needed for resuming training.\n\nWhether fine-tuning or training a new model from scratch, you can optionally create a new config file with different training parameters than the default ones we used. Specify the new config file using: ```--config_file /path/to/new_structure_config.json```. Creating a new config file is useful, for example, if you want to use a different learning rate ```lr``` during fine-tuning.\n\nAlternatively, many of the arguments in the config file can be specified as command line arguments using their associated flags. Any argument specified as a command line argument overrides the value of the argument in the config file.\n\n## Citing\nOur work can be cited using:\n```\n@software{smock2021tabletransformer,\n  author = {Smock, Brandon and Pesala, Rohith},\n  month = {06},\n  title = {{Table Transformer}},\n  url = {https://github.com/microsoft/table-transformer},\n  version = {1.0.0},\n  year = {2021}\n}\n```\n```\n@inproceedings{smock2022pubtables,\n  title={Pub{T}ables-1{M}: Towards comprehensive table extraction from unstructured documents},\n  author={Smock, Brandon and Pesala, Rohith and Abraham, Robin},\n  booktitle={Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition (CVPR)},\n  pages={4634-4642},\n  year={2022},\n  month={June}\n}\n```\n```\n@inproceedings{smock2023grits,\n  title={Gri{TS}: Grid table similarity metric for table structure recognition},\n  author={Smock, Brandon and Pesala, Rohith and Abraham, Robin},\n  booktitle={International Conference on Document Analysis and Recognition},\n  pages={535--549},\n  year={2023},\n  organization={Springer}\n}\n```\n```\n@article{smock2023aligning,\n  title={Aligning benchmark datasets for table structure recognition},\n  author={Smock, Brandon and Pesala, Rohith and Abraham, Robin},\n  booktitle={International Conference on Document Analysis and Recognition},\n  pages={371--386},\n  year={2023},\n  organization={Springer}\n}\n```\n\n## Contributing\n\nThis project welcomes contributions and suggestions.  Most contributions require you to agree to a\nContributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us\nthe rights to use your contribution. For details, visit https://cla.opensource.microsoft.com.\n\nWhen you submit a pull request, a CLA bot will automatically determine whether you need to provide\na CLA and decorate the PR appropriately (e.g., status check, comment). Simply follow the instructions\nprovided by the bot. You will only need to do this once across all repos using our CLA.\n\nThis project has adopted the [Microsoft Open Source Code of Conduct](https://opensource.microsoft.com/codeofconduct/).\nFor more information see the [Code of Conduct FAQ](https://opensource.microsoft.com/codeofconduct/faq/) or\ncontact [opencode@microsoft.com](mailto:opencode@microsoft.com) with any additional questions or comments.\n\n## Trademarks\n\nThis project may contain trademarks or logos for projects, products, or services. Authorized use of Microsoft \ntrademarks or logos is subject to and must follow \n[Microsoft's Trademark & Brand Guidelines](https://www.microsoft.com/en-us/legal/intellectualproperty/trademarks/usage/general).\nUse of Microsoft trademarks or logos in modified versions of this project must not cause confusion or imply Microsoft sponsorship.\nAny use of third-party trademarks or logos are subject to those third-party's policies.\n",
  "external_links_in_readme": [
    "https://huggingface.co/bsmock/TATR-v1.1-Fin/resolve/main/TATR-v1.1-Fin-msft.pth\">Weights</a></td>",
    "https://huggingface.co/bsmock/TATR-v1.1-All\">Model",
    "https://huggingface.co/datasets/bsmock/pubtables-1m",
    "https://arxiv.org/pdf/2110.00061.pdf",
    "https://openaccess.thecvf.com/content/CVPR2022/html/Smock_PubTables-1M_Towards_Comprehensive_Table_Extraction_From_Unstructured_Documents_CVPR_2022_paper.html",
    "https://huggingface.co/bsmock/TATR-v1.1-Pub/resolve/main/TATR-v1.1-Pub-msft.pth\">Weights</a></td>",
    "https://opensource.microsoft.com/codeofconduct/faq/",
    "https://huggingface.co/bsmock/TATR-v1.1-Pub\">Model",
    "https://huggingface.co/bsmock/tatr-pubtables1m-v1.0/resolve/main/pubtables1m_detection_detr_r18.pth\">Weights</a></td>",
    "https://github.com/microsoft/table-transformer},",
    "https://docs.microsoft.com/en-us/azure/storage/common/storage-use-azcopy-v10",
    "https://huggingface.co/bsmock/TATR-v1.1-All/resolve/main/TATR-v1.1-All-msft.pth\">Weights</a></td>",
    "https://huggingface.co/bsmock/TATR-v1.1-Fin\">Model",
    "https://arxiv.org/abs/2303.00716",
    "https://cvpr2022.thecvf.com/",
    "https://huggingface.co/bsmock/tatr-pubtables1m-v1.0/resolve/main/pubtables1m_structure_detr_r18.pth\">Weights</a></td>",
    "https://arxiv.org/abs/2203.12555",
    "https://user-images.githubusercontent.com/10793386/139559159-cd23c972-8731-48ed-91df-f3f27e9f4d79.jpg",
    "https://msropendataset01.blob.core.windows.net/pubtables1m?[SAS_TOKEN_HERE]\"",
    "https://msropendataset01.blob.core.windows.net/pubtables1m?[SAS_TOKEN_HERE]`.",
    "https://opensource.microsoft.com/codeofconduct/",
    "https://www.microsoft.com/en-us/legal/intellectualproperty/trademarks/usage/general",
    "https://msropendata.com/datasets/505fcbe3-1383-42b1-913a-f651b8b712d3",
    "https://huggingface.co/bsmock/tatr-pubtables1m-v1.0\">Model",
    "https://msropendata.com/",
    "https://icdar2023.org/",
    "https://cla.opensource.microsoft.com."
  ]
}
```

</details>


---

